<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>System App by Zalando</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <link type="image/x-icon" href="images/favico.png" rel="icon">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
</head>
<body>
    <div id="wrapper">
        <div id="title">
            <label>beta</label>
            <h1>System App by Zalando</h1>
            <p>A sleek, smart and open-source IT mapping and monitoring tool by Zalando.</p>
        </div>
        <div id="topfacts">
            <div>
                <h3>Visualize</h3>
                <p>Create diagrams and maps of your infrastructure. Easy with drag'n drop objects,
                   powerful with scriptable maps.</p>
            </div>
            <div>
                <h3>Integrate</h3>
                <p>Import your existing entities and data via JSON,
                and System App will keep them in sync with your maps automatically.</p>
            </div>
            <div>
                <h3>Monitor</h3>
                <p>Bind external JSON audit data to maps and trigger events or
                   visual alerts depending on the monitored values.</p>
            </div>
        </div>
        <div id="contents">
            <h2>Installation</h2>
            <div class="panel">
                <p>Felling lazy? Simply download and run the <a href="https://raw.github.com/zalando/system/master/install.sh" title="Download the System App install script.">./install.sh</a> file and let the magic happen.</p>
                <ol>
                    <li>
                        <code>$ curl https://raw.github.com/zalando/system/master/install.sh
                        <br />or<br />
                        $ wget https://raw.github.com/zalando/system/master/install.sh</code>
                    </li>
                    <li>
                        <code>$ chmod +x install.sh</code>
                    </li>
                    <li>
                        <code>$ ./install.sh</code>
                    </li>
                </ol>

                <p>The script should tell you which dependencies are missing and ask if you want to install them.</p>

                <h3>Installing manually</h3>

                <p>If the install script doesn't work or if you prefer to do stuff manually, you'll need:</p>

                <ul>
                    <li>Node.js (<a href="http://nodejs.org">http://nodejs.org</a>)</li>
                    <li>MongoDB (<a href="http://mongodb.org">http://mongodb.org</a>)</li>
                    <li>ImageMagick (<a href="http://www.imagemagick.org">http://www.imagemagick.org</a>)</li>
                </ul>
                <p>
                    To install Node.js on Linux:<br />
                    <a href="http://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager">http://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager</a>
                </p>

                <p>MongoDB can be downloaded from:<br />
                    <a href="http://www.mongodb.org/downloads">http://www.mongodb.org/downloads</a>
                </p>

                <p>ImageMagick is necessary to generate map thumbnails. The System App will actually run without it,
                   but then you won't have a "preview" of each map on the start screen.
                   To download ImageMagick:<br />
                    <a href="http://www.imagemagick.org/script/binary-releases.php">http://www.imagemagick.org/script/binary-releases.php</a>
                </p>

                <h3>Required Node.js modules</h3>
                <p>The easiest way to get the necessary modules is by running NPM uopdate:</p>
                <p><code>$ npm update</code></p>

                <h3>Avoiding MongoDB installation</h3>
                <p>
                    If you don't want to install and configure MongoDB locally, we suggest creating a free online
                    database at MongoLab (<a href="http://mongolab.com">http://mongolab.com</a>). The connection string will be
                    something like:
                </p>

                <p><code>mongodb://your_user:your_password@ds033187.mongolab.com:33187/your_database?auto_reconnect</code></p>
            </div>

            <h2>Configuring the server</h2>
            <div class="panel">
                <p>
                    All server configuration settings are located on the file <code>server/settings.coffee</code>.
                    The following <code>System.Settings</code> keys will certainly need your attention:
                </p>

                <h5>Settings.General</h5>
                <p>
                    Change the <code>appTitle</code> and set your desired title. Something like "MyCompany System".
                    Make sure the <code>debug</code> is set to false before you deploy the app to production!
                </p>

                <h5>Settings.Database</h5>
                <p>
                    She <code>connString</code> with the MongoDB connection string. If you have MongoDB installed locally with no user and password,
                    the default should work fine.
                </p>

                <h5>Settings.Paths (all)</h5>
                <p>The default paths should work unless you have very specific restrictions on your environment.
                   Edit these values in case you need to save or fetch data from different folders,
                   for example saving the app logs on a global "/logs" location.</p>

                <h5>Settings.Web.defaultPort</h5>

                <p>Port used by Node.js. The default 3003 should work fine if you have no firewall rules.</p>

                <h2>Starting the server</h2>

                <p>To start the <em>System App</em>:</p>

                <p><code>$ coffee server.coffee</code></p>

                <p>This will start Node.js under the port 3003 (or whatever port you have set on <code>Settings.Web.defaultPort</code>).
                   In case you don't have installed the module <em>coffee-script</em> globally, you'll have to run it from within the
                   node_modules directory, like this:</p>

                <p><code>$ ./node_modules/coffee-script/bin/coffee server.coffee</code></p>

                <p>If it throws an error or if you can't access the app on the browser then you might have something wrong
                   on your <code>server/settings.coffee</code> file, or a firewall issue.</p>

                <h3>Production vs. Debugging</h3>

                <p>By default Node.js will run in "Debug mode". If you're deploying and running on production,
                   you must set the <code>NODE_ENV</code> to "production" to avoid having all the debugging statements
                   logged to the console. Putting it simple:</p>

                <p><code>$ NODE_ENV=production coffee server.coffee</code></p>

                <p>Please note that the <em>System App</em> will enter debug mode automatically when it runs under
                   the <code>localhost</code> hostname. In debug mode, most actions and procedures will be logged to the
                   console, both on the server and the client side.</p>

                <h3>Running the server "forever"</h3>

                <p>If you want the server to run like a service (so it restarts itself in case of crash / error / termination)
                   we recommend using the node module <em>forever</em>. You can install it using NPM globally like this:</p>

                <p><code>$ sudo npm install -g forever</code></p>

                <p>To start <em>System</em> using <em>forever</em>, run it under the app root folder:</p>

                <p><code>$ forever start -c coffee server.coffee</code></p>
            </div>

            <h2>Need help?</h2>
            <div class="panel">
                <p>Check the readme again! And then if you REALLY still need help please get in touch with Igor:
                    <a href="mailto:igor.ramadas@zalando.de">igor.ramadas@zalando.de</a></p>

                <p><em>Have fun!</em></p>
            </div>
        </div>
    </div>
</body>
</html>